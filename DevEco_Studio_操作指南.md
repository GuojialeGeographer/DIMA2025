# DevEco Studio 操作指南 - CityZen项目

## 🎯 当前状态
✅ DevEco Studio已安装  
✅ CityZen项目已导入  
🔄 **下一步：配置和运行**

---

## 📋 **第一步：项目配置检查** (5分钟)

### 1.1 检查项目结构
在DevEco Studio左侧项目面板中，确认你能看到：
```
DIMA2025/
├── entry/
│   ├── src/main/ets/
│   │   ├── entryability/
│   │   ├── pages/
│   │   ├── services/
│   │   └── views/
│   └── src/test/ets/
├── build-profile.json5
└── package.json
```

### 1.2 检查SDK配置
1. 点击 **File** → **Settings** (或 **DevEco Studio** → **Preferences** on Mac)
2. 导航到 **SDK** → **OpenHarmony SDK**
3. 确认已安装：
   - ✅ **API Version 18** (项目需要)
   - ✅ **ArkTS工具链**
   - ✅ **模拟器镜像** (如果要用模拟器)

### 1.3 同步项目依赖
1. 如果看到顶部有 **"Sync Now"** 提示，点击它
2. 等待依赖下载完成 (可能需要几分钟)
3. 确认底部状态栏显示 **"Sync successful"**

---

## 🔧 **第二步：设备准备** (10分钟)

### 选项A：使用模拟器 (推荐新手)
1. 点击顶部工具栏的 **Device Manager** 图标
2. 点击 **"Create Device"**
3. 选择设备类型：**Phone** 或 **Tablet**
4. 选择系统镜像：**OpenHarmony API 18**
5. 点击 **"Create"** 并等待模拟器启动
6. 确认模拟器显示在设备列表中

### 选项B：使用真机 (如果有OpenHarmony设备)
1. 在设备上开启 **开发者模式**
2. 开启 **USB调试**
3. 用USB连接设备到电脑
4. 在DevEco Studio中确认设备显示在设备列表

---

## 🚀 **第三步：运行应用** (5分钟)

### 3.1 选择运行配置
1. 在顶部工具栏找到运行配置下拉菜单
2. 确认选择了 **"entry"** 配置
3. 确认设备选择正确 (模拟器或真机)

### 3.2 启动应用
1. 点击绿色的 **"Run"** 按钮 (▶️)
2. 或者使用快捷键：**Shift + F10** (Windows/Linux) 或 **Ctrl + R** (Mac)
3. 等待编译和安装过程

### 3.3 预期结果
应用启动后，你应该看到：
- 🏠 **底部导航栏**：Dashboard, SmartMap, History
- 📊 **Dashboard页面**：显示环境质量信息
- 🎨 **CityZen品牌界面**：蓝绿色主题

---

## 🧪 **第四步：运行测试** (10分钟)

### 4.1 运行单元测试
1. 在项目面板中右键点击 **entry/src/test**
2. 选择 **"Run Tests in 'test'"**
3. 查看底部的测试结果面板
4. 确认大部分测试通过 ✅

### 4.2 查看测试覆盖
1. 测试运行完成后，查看 **Test Results** 面板
2. 应该看到类似：
   ```
   ✅ 25+ tests passed
   ⚠️  可能有几个测试因为模拟器环境而跳过
   ❌ 如果有失败，通常是权限或网络相关
   ```

---

## 🔍 **第五步：功能验证** (15分钟)

### 5.1 测试基础导航
在运行的应用中：
- [ ] 点击底部 **Dashboard** 标签
- [ ] 点击底部 **SmartMap** 标签  
- [ ] 点击底部 **History** 标签
- [ ] 从左边缘滑动打开侧边菜单

### 5.2 测试权限请求
- [ ] 应用启动时应该请求位置权限
- [ ] 在模拟器/设备上点击 **"允许"**
- [ ] Dashboard应该显示位置相关信息

### 5.3 测试数据显示
- [ ] Dashboard显示环境评分 (可能是模拟数据)
- [ ] SmartMap显示地图界面
- [ ] History显示空列表或示例数据

---

## ⚠️ **常见问题解决**

### 问题1：编译错误
**症状**：红色错误信息，无法运行
**解决**：
1. 检查OpenHarmony SDK版本是否为API 18
2. 点击 **Build** → **Clean Project**
3. 点击 **Build** → **Rebuild Project**

### 问题2：设备连接问题
**症状**：找不到设备或模拟器
**解决**：
1. 重启模拟器
2. 检查USB连接 (真机)
3. 在Device Manager中重新创建模拟器

### 问题3：权限被拒绝
**症状**：应用崩溃或功能不工作
**解决**：
1. 在设备设置中手动授予位置权限
2. 重启应用

### 问题4：网络请求失败
**症状**：天气数据不显示
**解决**：
1. 这是正常的，因为没有配置真实API密钥
2. 应用会显示模拟数据或错误处理界面

### 问题5：测试失败
**症状**：部分测试显示红色
**解决**：
1. 模拟器环境的测试失败是正常的
2. 重点关注编译是否成功
3. 查看具体错误信息

---

## 📊 **成功标准**

### ✅ 基础成功 (必须达到)
- [ ] 项目编译无错误
- [ ] 应用能够启动
- [ ] 基础UI显示正常
- [ ] 导航功能工作

### ✅ 完整成功 (理想状态)
- [ ] 所有测试通过
- [ ] 权限正常授予
- [ ] 数据显示功能正常
- [ ] 地图界面加载

### ✅ 生产就绪 (最终目标)
- [ ] 配置真实API密钥
- [ ] 在真机上测试
- [ ] 性能表现良好
- [ ] 用户体验流畅

---

## 🎯 **下一步计划**

### 如果基础运行成功：
1. **配置API密钥** (获取真实数据)
2. **真机测试** (如果有设备)
3. **功能定制** (根据需求调整)
4. **性能优化** (如果需要)

### 如果遇到问题：
1. **截图错误信息** 
2. **查看日志输出**
3. **检查环境配置**
4. **寻求技术支持**

---

## 📞 **获取帮助**

### 日志查看
1. 在DevEco Studio底部点击 **"Log"** 标签
2. 过滤标签：`CityZen`, `LocationService`, `WeatherService`
3. 查看错误和警告信息

### 调试模式
1. 点击 **"Debug"** 按钮 (🐛) 而不是Run
2. 设置断点调试代码
3. 查看变量值和执行流程

---

## 🎉 **恭喜！**

如果你完成了前三步，说明CityZen应用已经成功运行！

**项目状态**: 🚀 **运行成功**  
**下一步**: 探索功能或配置真实数据源

需要我帮你解决任何具体问题吗？